<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
</head>

<body style="padding: 0; margin: 0;">
<canvas id="canvas" style="width: 100%; height: 100%;"></canvas>
</body>
<script>

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext('2d');

const View = {
    x: 0,
    y: 0,
    scale: 1
}

const RenderProperties = {
    colors: {
        primary: "#FFFFFF",
        secondary: "#DDF3EE",
        secondary2: "#2DAC8F"
    }
}

function setupCanvasTest(){
    let w = Math.round(window.innerWidth * window.devicePixelRatio);
    let h = Math.round(window.innerHeight * window.devicePixelRatio);   
    canvas.width = w;
    canvas.height = h;
}

function renderGrid(){
    let dist = 60;
    let thickness = 1;
    let size = 6;

    let x_max = Math.ceil(canvas.width/dist);
    let y_max = Math.ceil(canvas.height/dist);

    ctx.fillStyle = "#CCC";
    for(let x = 0; x < x_max; x++){
        for(let y = 0; y < y_max; y++){
            ctx.fillRect(x*dist-size, y*dist-thickness, size*2, 1);
            ctx.fillRect(x*dist-thickness, y*dist-size, 1, size*2);
        }
    }
}



function renderNode(node){

    let precomputedHeight = 90;

    ctx.strokeStyle = "black"; RenderProperties.colors.secondary2;
    ctx.lineWidth = 1;

    ctx.fillStyle = "#B9B9B9";
    ctx.fillRect(node.x, node.y, node.width, node.height);
    ctx.strokeRect(node.x, node.y, node.width, precomputedHeight);
    

    let type = "void";
    let namespace = "";
    let symbol = "test";

    let textSize = 25;

    ctx.font = "20px lexend";

    let typeWidth = ctx.measureText(type).width+6;
    let namespaceWidth = ctx.measureText(namespace).width+6*ctx.measureText(namespace).width;
    let symbolWidth = ctx.measureText(symbol).width+6;
    let totalWidth = typeWidth + namespaceWidth + symbolWidth;

    ctx.fillStyle = RenderProperties.colors.secondary2;

    ctx.fillRect(node.x, node.y, typeWidth, textSize + 6);
    ctx.strokeRect(node.x, node.y, typeWidth, textSize + 6);

    ctx.fillStyle = RenderProperties.colors.primary;

    ctx.fillRect(node.x+typeWidth, node.y, namespaceWidth, textSize+6);
    ctx.strokeRect(node.x+typeWidth, node.y, namespaceWidth, textSize+6);
    ctx.fillRect(node.x+typeWidth+namespaceWidth, node.y, node.width-typeWidth-namespaceWidth, textSize+6);
    ctx.strokeRect(node.x+typeWidth+namespaceWidth, node.y, node.width-typeWidth-namespaceWidth, textSize+6);

    ctx.fillStyle = "white";
    ctx.fillText(type, node.x+3, node.y+textSize);
    ctx.fillStyle = "black";
    ctx.fillText(namespace, node.x+typeWidth+3, node.y+textSize);
    ctx.fillText(symbol, node.x+typeWidth+namespaceWidth+3, node.y+textSize);

    let inputText = "INPUTS";
    ctx.font = "15px lexend";
    ctx.fillText(inputText, node.x+4, 2*textSize+10);

    let inputTop = 2*textSize+8 + 10;

    for(let i = 0; i < 0; i++){
        ctx.fillStyle = "white";
        ctx.beginPath();
        ctx.roundRect(node.x+4, inputTop, node.width-8, 25, 5);
        ctx.fill();
        ctx.stroke();
        inputTop += 29;
    }
    ctx.fillStyle = "black";
    ctx.fillText("DESCRIPTION", node.x+4, inputTop+15);
    inputTop += 20;

    let descriptionHeight = 0;

    ctx.fillStyle = "white";
    ctx.beginPath();
    ctx.roundRect(node.x+4, inputTop, node.width-8, descriptionHeight, 5);
    ctx.fill();
    ctx.stroke();
    inputTop += 29;
}

setupCanvasTest();

function render(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    renderGrid();

    renderNode({x: 10, y: 10, width: 250, height: 300});

    requestAnimationFrame(render);
}

render();


</script>